resources:
  - _id: env_clickup_local
    _type: environment
    name: Local
    variables:
      - name: baseUrl
        value: http://localhost:8080
      - name: apiToken
        value: seu-token-api-aqui

  - _id: env_clickup_prod
    _type: environment
    name: Production
    variables:
      - name: baseUrl
        value: https://clickup-api.seudominio.com
      - name: apiToken
        value: seu-token-api-aqui

  - _id: folder_clickup
    _type: folder
    name: ClickUp Excel API
    description: API para geração de relatórios Excel a partir do ClickUp (v1.4.1)

  - _id: req_health
    _type: http_request
    name: Health Check
    method: GET
    url: "{{ baseUrl }}/health"
    folderId: folder_clickup

  - _id: req_debug_memory
    _type: http_request
    name: Debug Memory
    method: GET
    url: "{{ baseUrl }}/debug/memory"
    folderId: folder_clickup

  - _id: req_report_basico
    _type: http_request
    name: Relatório Básico (main tasks abertas)
    method: POST
    url: "{{ baseUrl }}/api/v1/reports"
    folderId: folder_clickup
    headers:
      - name: Authorization
        value: "Bearer {{ apiToken }}"
      - name: Content-Type
        value: application/json
    body:
      mimeType: application/json
      text: |
        {
          "list_ids": ["901234567890"],
          "fields": ["name", "status", "assignees", "due_date", "date_created"],
          "subtasks": false,
          "include_closed": false
        }

  - _id: req_report_subtasks
    _type: http_request
    name: Relatório com Subtasks
    method: POST
    url: "{{ baseUrl }}/api/v1/reports"
    folderId: folder_clickup
    headers:
      - name: Authorization
        value: "Bearer {{ apiToken }}"
      - name: Content-Type
        value: application/json
    body:
      mimeType: application/json
      text: |
        {
          "list_ids": ["901234567890"],
          "fields": ["name", "status", "assignees", "due_date"],
          "subtasks": true,
          "include_closed": false
        }

  - _id: req_report_finalizadas
    _type: http_request
    name: Relatório com Tasks Finalizadas
    method: POST
    url: "{{ baseUrl }}/api/v1/reports"
    folderId: folder_clickup
    headers:
      - name: Authorization
        value: "Bearer {{ apiToken }}"
      - name: Content-Type
        value: application/json
    body:
      mimeType: application/json
      text: |
        {
          "list_ids": ["901234567890"],
          "fields": ["name", "status", "date_closed"],
          "subtasks": false,
          "include_closed": true
        }

  - _id: req_report_webhook
    _type: http_request
    name: Relatório Assíncrono (Webhook)
    method: POST
    url: "{{ baseUrl }}/api/v1/reports"
    folderId: folder_clickup
    headers:
      - name: Authorization
        value: "Bearer {{ apiToken }}"
      - name: Content-Type
        value: application/json
    body:
      mimeType: application/json
      text: |
        {
          "list_ids": ["901234567890", "901234567891"],
          "fields": ["name", "status", "due_date"],
          "webhook_url": "https://seu-servidor.com/webhook",
          "subtasks": false,
          "include_closed": false
        }

  - _id: req_report_completo
    _type: http_request
    name: Relatório Completo (todas as tasks)
    method: POST
    url: "{{ baseUrl }}/api/v1/reports"
    folderId: folder_clickup
    headers:
      - name: Authorization
        value: "Bearer {{ apiToken }}"
      - name: Content-Type
        value: application/json
    body:
      mimeType: application/json
      text: |
        {
          "list_ids": ["901234567890"],
          "fields": ["id", "name", "description", "status", "priority", "assignees", "tags", "date_created", "date_updated", "date_closed", "due_date", "start_date", "list", "folder", "url"],
          "subtasks": true,
          "include_closed": true
        }

  - _id: req_force_gc
    _type: http_request
    name: Force GC
    method: POST
    url: "{{ baseUrl }}/debug/gc"
    folderId: folder_clickup
